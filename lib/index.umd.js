(function(s,h){typeof exports=="object"&&typeof module!="undefined"?h(exports,require("vue-demi")):typeof define=="function"&&define.amd?define(["exports","vue-demi"],h):(s=typeof globalThis!="undefined"?globalThis:s||self,h(s["@korylee/sku"]={},s.vueDemi))})(this,function(s,h){"use strict";var g={},w={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isUrl=n.isArray=n.isRegExp=n.isBoolean=n.isPromise=n.isNumber=n.isNullOrUnDef=n.isUndefined=n.isNull=n.isDate=n.isFunction=n.isObject=n.isString=n.isUnDef=n.isDef=n.is=void 0;var e=Object.prototype.toString,u=function(i,j){return e.call(i)==="[object ".concat(j,"]")};n.is=u;var r=function(i){return typeof i!="undefined"};n.isDef=r;var f=function(i){return!(0,n.isDef)(i)};n.isUnDef=f;var c=function(i){return(0,n.is)(i,"String")};n.isString=c;var t=function(i){return i!==null&&(0,n.is)(i,"Object")};n.isObject=t;var o=function(i){return typeof i=="function"};n.isFunction=o;var a=function(i){return(0,n.is)(i,"Date")};n.isDate=a;var v=function(i){return i===null};n.isNull=v;var l=function(i){return i===void 0};n.isUndefined=l;var d=function(i){return(0,n.isUndefined)(i)||(0,n.isNull)(i)};n.isNullOrUnDef=d;var A=function(i){return(0,n.is)(i,"Number")};n.isNumber=A;var V=function(i){return(0,n.is)(i,"Promise")&&(0,n.isObject)(i)&&(0,n.isFunction)(i.then)&&(0,n.isFunction)(i.catch)};n.isPromise=V;var P=function(i){return(0,n.is)(i,"Boolean")};n.isBoolean=P;var U=function(i){return(0,n.is)(i,"RegExp")};n.isRegExp=U;var F=function(i){return i&&Array.isArray(i)};n.isArray=F;var k=function(i){var j=/(((^https?:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%\/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[\w]*))?)$/;return j.test(i)};n.isUrl=k})(w),function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.map=n.mapSkip=n.wrapInArray=void 0;var e=w;function u(f){return(0,e.isNull)(f)||(0,e.isUndefined)(f)?[]:Array.isArray(f)?f:[f]}n.wrapInArray=u,n.mapSkip=Symbol("skip");function r(f,c,t){for(var o=[],a=0;a<f.length;a++){var v=f[a],l=c.call(t,v,a,f);l!==n.mapSkip&&o.push(l)}return o}n.map=r}(g);function E(n){return n!=null&&n.length?n.length===1?n[0].map(e=>[e]):n.reduce((e,u)=>{const r=[];return e.forEach(f=>{u.forEach(c=>{r.push([...g.wrapInArray(f),c])})}),r}):[]}function N(n,e){return!n.some(u=>!e.includes(u))}const b=()=>{};function O(n){const e=g.map(n,({options:u})=>u!=null&&u.length?u.map(({uid:r})=>r):g.mapSkip);return E(e)}function y(n,{variations:e,descartesUidArray:u,updateItem:r=b}){const f=[],c=[];u=u!=null?u:O(e),n.forEach((o,a)=>{let v=!0;u.forEach((l,d)=>{N(l,o.uids)&&(c[d]||(v=!1),o.uids=l,r==null||r(o,l,e),c[d]=!0)}),v&&f.push(a)});const t=f.length;for(let o=t-1;o>=0;o--){const a=f[o];n.splice(a,1)}}function S(n,{variations:e,descartesUidArray:u,createItem:r=t=>({uids:t}),updateItem:f=b,addItems:c=[]}){u=u!=null?u:O(e),u.forEach(t=>{if(n.findIndex(l=>{const d=N(l.uids,t);return d&&(l.uids=t,f==null||f(l,t,e)),d})!==-1||!(c!=null&&c.length?t.some(l=>c.some(d=>l===d.uid)):!0))return;const v=r(t,e);n.push(v)})}function m(n,e){return n.map((u,r)=>e[r].options.findIndex(f=>f.uid===u))}function D(n,e){n.sort((u,r)=>parseInt(m(u.uids,e).join(""))-parseInt(m(r.uids,e).join("")))}function _(n,e,u,r,f=!0){const c=h.computed(()=>O(n.value));return{descartesUidArray:c,add:t=>{S(e.value,{variations:n.value,descartesUidArray:c.value,updateItem:r,createItem:u,addItems:g.wrapInArray(t)}),f&&D(e.value,n.value)},remove:()=>{y(e.value,{variations:n.value,descartesUidArray:c.value,updateItem:r}),f&&D(e.value,n.value)}}}s.addVariationOption=S,s.getDescartesUidArray=O,s.removeVariationOption=y,s.sortVariationOption=D,s.uidsToIndex=m,s.useVariationOption=_,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
